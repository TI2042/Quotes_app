{% extends 'quotes/base.html' %}

{% block content %}
<h1>–í—Å–µ —Ü–∏—Ç–∞—Ç—ã</h1>

<form method="get" style="margin-bottom: 20px;">
    <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫" value="{{ request.GET.q }}">
    <button type="submit">–ò—Å–∫–∞—Ç—å</button>
</form>

<table border="1" cellpadding="8" cellspacing="0" style="width:100%; border-collapse: collapse;">
    <thead>
    <tr>
        <th>
            <a href="?sort=text&order={% if sort == 'text' and order == 'asc' %}desc{% else %}asc{% endif %}{% if query %}&q={{ query }}{% endif %}">
                –¶–∏—Ç–∞—Ç–∞
            </a>
        </th>
        <th>
            <a href="?sort=source&order={% if sort == 'source' and order == 'asc' %}desc{% else %}asc{% endif %}{% if query %}&q={{ query }}{% endif %}">
                –ò—Å—Ç–æ—á–Ω–∏–∫
            </a>
        </th>
        <th>
            <a href="?sort=likes&order={% if sort == 'likes' and order == 'asc' %}desc{% else %}asc{% endif %}{% if query %}&q={{ query }}{% endif %}">
                üëç
            </a>
        </th>
        <th>
            <a href="?sort=dislikes&order={% if sort == 'dislikes' and order == 'asc' %}desc{% else %}asc{% endif %}{% if query %}&q={{ query }}{% endif %}">
                üëé
            </a>
        </th>
        <th>
            <a href="?sort=views&order={% if sort == 'views' and order == 'asc' %}desc{% else %}asc{% endif %}{% if query %}&q={{ query }}{% endif %}">
                üëÅÔ∏è
            </a>
        </th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    </thead>
    <tbody>
    {% for quote in page_obj %}
    <tr>
        <td>{{ quote.text }}</td>
        <td>{{ quote.source }}</td>
        <td>{{ quote.likes }}</td>
        <td>{{ quote.dislikes }}</td>
        <td>{{ quote.views }}</td>
        <td>
            <a href="{% url 'edit_quote' quote.id %}">‚úèÔ∏è</a>
            <a href="{% url 'delete_quote' quote.id %}">üóëÔ∏è</a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="6">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
<div style="margin-top: 20px;">
    <span>
      {% if page_obj.has_previous %}
        <a href="?page=1{% if sort %}&sort={{ sort }}{% endif %}{% if query %}&q={{ query }}{% endif %}">&laquo; –ü–µ—Ä–≤–∞—è</a>
        <a href="?page={{ page_obj.previous_page_number }}{% if sort %}&sort={{ sort }}{% endif %}{% if query %}&q={{ query }}{% endif %}">&lsaquo; –ù–∞–∑–∞–¥</a>
      {% endif %}

      <strong>–°—Ç—Ä. {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</strong>

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}{% if sort %}&sort={{ sort }}{% endif %}{% if query %}&q={{ query }}{% endif %}">–í–ø–µ—Ä—ë–¥ &rsaquo;</a>
        <a href="?page={{ page_obj.paginator.num_pages }}{% if sort %}&sort={{ sort }}{% endif %}{% if query %}&q={{ query }}{% endif %}">–ü–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
      {% endif %}
    </span>
</div>
{% endblock %}
